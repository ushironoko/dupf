# Image Duplicate Finder

TypeScriptã§æ§‹ç¯‰ã•ã‚ŒãŸé«˜æ€§èƒ½ãªç”»åƒé‡è¤‡æ¤œå‡ºCLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®é‡è¤‡ç”»åƒã‚’æ¤œå‡ºã—ã€å®‰å…¨ã«duplicateãƒ•ã‚©ãƒ«ãƒ€ã¸ç§»å‹•ã—ã¾ã™ã€‚

## ç‰¹å¾´

- ğŸš€ **ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«**: Node.jsä¸è¦ã®å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œå¯èƒ½
- ğŸ” **é«˜ç²¾åº¦æ¤œå‡º**: ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ + ãƒã‚¤ãƒˆå˜ä½æ¯”è¼ƒã«ã‚ˆã‚‹ç¢ºå®Ÿãªé‡è¤‡æ¤œå‡º
- ğŸ¯ **å¤šæ§˜ãªç”»åƒå½¢å¼å¯¾å¿œ**: JPG, JPEG, PNG, GIF, BMP, WebP, TIFF
- ğŸ›¡ï¸ **å®‰å…¨ãªæ“ä½œ**: ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³æ©Ÿèƒ½ã€ãƒ•ã‚¡ã‚¤ãƒ«åè¡çªå›é¿ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âš¡ **é«˜æ€§èƒ½**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã€ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–ã€å¤§é‡ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ
- ğŸ§ª **å“è³ªä¿è¨¼**: TypeScriptã€ESLintã€åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã€CI/CDå¯¾å¿œ

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd image-duplicate-finder

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰
pnpm build:standalone
```

### 2. ä½¿ç”¨æ–¹æ³•

```bash
# åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•
./standalone/duplicate-finder /path/to/images

# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼ˆå®Ÿéš›ã«ã¯ç§»å‹•ã›ãšã€ä½•ãŒç§»å‹•ã•ã‚Œã‚‹ã‹ã‚’è¡¨ç¤ºï¼‰
./standalone/duplicate-finder /path/to/images --dry-run --verbose

# ã‚«ã‚¹ã‚¿ãƒ é‡è¤‡ãƒ•ã‚©ãƒ«ãƒ€å
./standalone/duplicate-finder /path/to/images --output-dir duplicates

# ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º
./standalone/duplicate-finder --help
```

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæ¨å¥¨ï¼‰

```bash
# ãƒ“ãƒ«ãƒ‰ã®ã¿å®Ÿè¡Œ
pnpm install
pnpm build:standalone

# å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»–ã®ãƒã‚·ãƒ³ã«ã‚³ãƒ”ãƒ¼å¯èƒ½
cp ./standalone/duplicate-finder /usr/local/bin/  # ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã§ä½¿ç”¨
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: Node.jsç’°å¢ƒã§ã®å®Ÿè¡Œ

```bash
# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰
pnpm dev /path/to/images

# TypeScriptãƒ“ãƒ«ãƒ‰å¾Œã«å®Ÿè¡Œ
pnpm build
node dist/bin/duplicate-finder.js /path/to/images
```

## ã‚³ãƒãƒ³ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ | ä¾‹ |
|------------|------|-----|
| `<directory>` | ã‚¹ã‚­ãƒ£ãƒ³å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆå¿…é ˆï¼‰ | `./photos` |
| `--dry-run, -d` | ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ãªã—ï¼‰ | `--dry-run` |
| `--verbose, -v` | è©³ç´°ãªå‡ºåŠ› | `--verbose` |
| `--output-dir, -o` | é‡è¤‡ãƒ•ã‚©ãƒ«ãƒ€åï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: duplicateï¼‰ | `--output-dir duplicates` |
| `--help, -h` | ãƒ˜ãƒ«ãƒ—è¡¨ç¤º | `--help` |
| `--version, -V` | ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡¨ç¤º | `--version` |

## å®Ÿè¡Œä¾‹

```bash
# ãƒ†ã‚¹ãƒˆç”¨ã®ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ã§å®Ÿè¡Œ
./standalone/duplicate-finder ./test-images --dry-run --verbose

# å‡ºåŠ›ä¾‹:
# Scanning directory: /home/user/test-images
# Duplicate folder: duplicate
# Dry run: Yes
#
# Found 10 image files.
# Comparing images for duplicates...
# Found 2 duplicate image(s).
#
# Duplicate found:
#   Original: /home/user/test-images/photo1.jpg
#   Duplicate: /home/user/test-images/photo1_copy.jpg
#   Would move to: /home/user/test-images/duplicate/photo1_copy.jpg
#
# Dry run completed. 2 duplicate(s) would be moved.
```

## æŠ€è¡“ä»•æ§˜

### ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
1. **ãƒ•ã‚¡ã‚¤ãƒ«ç™ºè¦‹**: å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å†å¸°çš„ã«ã‚¹ã‚­ãƒ£ãƒ³
2. **ãƒãƒƒã‚·ãƒ¥ç”Ÿæˆ**: Sharpä½¿ç”¨ã«ã‚ˆã‚‹8x8ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ç”»åƒã®MD5ãƒãƒƒã‚·ãƒ¥
3. **é«˜é€Ÿæ¯”è¼ƒ**: ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã§ã®åˆæœŸã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
4. **å³å¯†æ¤œè¨¼**: ãƒã‚¤ãƒˆå˜ä½ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹æ¯”è¼ƒ
5. **å®‰å…¨ç§»å‹•**: è¡çªå›é¿æ©Ÿèƒ½ä»˜ããƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•

### å¯¾å¿œç”»åƒå½¢å¼
- JPEG (.jpg, .jpeg)
- PNG (.png)
- GIF (.gif)
- BMP (.bmp)
- WebP (.webp)
- TIFF (.tiff, .tif)

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã«ã‚ˆã‚‹ä½ãƒ¡ãƒ¢ãƒªä½¿ç”¨
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½**: ç”»åƒãƒãƒƒã‚·ãƒ¥ã®ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **å¤§é‡ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ**: æ•°ä¸‡æšã®ç”»åƒã§ã‚‚åŠ¹ç‡çš„ã«å‡¦ç†

## é–‹ç™ºè€…å‘ã‘æƒ…å ±

### é–‹ç™ºç’°å¢ƒæ§‹ç¯‰

```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
pnpm dev /path/to/images

# TypeScriptãƒ“ãƒ«ãƒ‰
pnpm build

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:run

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
pnpm lint
pnpm format
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
â”œâ”€â”€ bin/duplicate-finder.ts          # CLI ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ image-comparator.ts          # ç”»åƒæ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ file-utils.ts                # ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                        # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ integration/                 # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ features/images/              # ãƒ†ã‚¹ãƒˆç”¨ç”»åƒ
â”œâ”€â”€ dist/                            # TypeScript ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â”œâ”€â”€ standalone/                      # å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œå¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ duplicate-finder             # ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ ...è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **è¨€èª**: TypeScript (ES2022)
- **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ **: Node.js 18+
- **ç”»åƒå‡¦ç†**: Sharp
- **CLI**: Commander.js
- **ãƒ†ã‚¹ãƒˆ**: Vitest
- **ãƒ“ãƒ«ãƒ‰**: @vercel/ncc
- **å“è³ªç®¡ç†**: ESLint, Prettier

### ãƒ†ã‚¹ãƒˆ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:run

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
pnpm test

# ãƒ†ã‚¹ãƒˆ UI
pnpm test:ui

# çµ±åˆãƒ†ã‚¹ãƒˆã®ã¿
pnpm test tests/integration

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã¿
pnpm test tests/unit
```

## é…å¸ƒ

### ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ç‰ˆã®åˆ©ç‚¹
- **å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«**: `./standalone/duplicate-finder` (ç´„678KB)
- **ä¾å­˜é–¢ä¿‚ãªã—**: Node.jsä¸è¦ã€å³åº§ã«å®Ÿè¡Œå¯èƒ½
- **ãƒãƒ¼ã‚¿ãƒ–ãƒ«**: ã©ã®ãƒã‚·ãƒ³ã«ã‚‚ã‚³ãƒ”ãƒ¼ã—ã¦å®Ÿè¡Œå¯èƒ½
- **ã‚·ãƒ³ãƒ—ãƒ«**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã€è¨­å®šä¸è¦

### é…å¸ƒæ–¹æ³•
```bash
# ãƒ“ãƒ«ãƒ‰
pnpm build:standalone

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒã‚·ãƒ³ã«ã‚³ãƒ”ãƒ¼
scp ./standalone/duplicate-finder user@target:/usr/local/bin/

# å®Ÿè¡Œæ¨©é™ç¢ºèª
chmod +x /usr/local/bin/duplicate-finder
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**Q: Permission denied ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ**
```bash
chmod +x ./standalone/duplicate-finder
```

**Q: å¤§é‡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ¡ãƒ¢ãƒªä¸è¶³**
```bash
# ä¸€åº¦ã«å‡¦ç†ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†å‰²ã—ã¦ãã ã•ã„
./standalone/duplicate-finder /path/to/photos/2023 --verbose
./standalone/duplicate-finder /path/to/photos/2024 --verbose
```

**Q: ç‰¹å®šã®ç”»åƒå½¢å¼ãŒæ¤œå‡ºã•ã‚Œãªã„**
- å¯¾å¿œå½¢å¼ã‚’ç¢ºèª: JPG, JPEG, PNG, GIF, BMP, WebP, TIFF
- ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèª

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„èª²é¡Œå ±å‘Šã‚’æ­“è¿ã—ã¾ã™ã€‚é–‹ç™ºã«å‚åŠ ã™ã‚‹éš›ã¯:

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

## å¤‰æ›´å±¥æ­´

### v1.0.0
- åˆæœŸãƒªãƒªãƒ¼ã‚¹
- TypeScriptå®Œå…¨å¯¾å¿œ
- ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
- åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
- ESLint + Prettier å¯¾å¿œ